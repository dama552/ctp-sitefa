{% extends 'inicio/inicio.html' %}

{% block section %}

<div class="header">
  <h1><i class="fas fa-edit header-icon"></i> Actualizar CalificaciÃ³n</h1>
</div>

<!-- Muestra los datos del registro -->
<div class="alert alert-info mt-4">
  <h5>ðŸ“‹ Datos del Registro</h5>
  <p class="mb-1"><strong>Estudiante:</strong> {{ calificacion.estudiante }}</p>
  <p class="mb-1"><strong>Materia:</strong> {{ calificacion.materia.nombre }}</p>
  <p class="mb-0"><strong>Fecha:</strong> {{ calificacion.fecha|date:"d \d\e F \d\e Y" }}</p>
  <p class="mb-0"><strong>Nota:</strong> {{ calificacion.nota }}</p>
</div>

<!-- Muestra errores -->
{% if form.errors %}
  <div class="alert alert-danger mt-3">
    <h5>Por favor, corrige los siguientes errores:</h5>
    <ul>
      {% for field, errors in form.errors.items %}
        <li><strong>{{ field }}:</strong> {{ errors|join:", " }}</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

<form method="post" class="mt-4">
  {% csrf_token %}

  <!-- Campos ocultos para estudiante y materia si se requieren (opcional) -->
  <input type="hidden" name="estudiante" value="{{ calificacion.estudiante.id }}">
  <input type="hidden" name="materia" value="{{ calificacion.materia.id }}">

  <!-- Campo "Nota" -->
  <div class="mb-3">
    <label for="{{ form.nota.id_for_label }}" class="form-label">CalificaciÃ³n / Nota</label>
    {{ form.nota }}
    {% if form.nota.errors %}
      <div class="text-danger">{{ form.nota.errors }}</div>
    {% endif %}
  </div>

  <!-- Campo "Fecha" (si se permite modificar) -->
  <div class="mb-3">
    <label for="{{ form.fecha.id_for_label }}" class="form-label">Fecha</label>
    {{ form.fecha }}
    {% if form.fecha.errors %}
      <div class="text-danger">{{ form.fecha.errors }}</div>
    {% endif %}
  </div>

  <!-- Campo "Observaciones" (opcional) -->
  <div class="mb-3">
    <label for="{{ form.observacion.id_for_label }}" class="form-label">Observaciones</label>
    {{ form.observacion }}
    {% if form.observacion.errors %}
      <div class="text-danger">{{ form.observacion.errors }}</div>
    {% endif %}
  </div>

  <!-- Botones -->
  <div class="d-flex justify-content-end gap-2">
    <a href="{% url 'calificacion:calificacion_leer' %}" class="btn btn-secondary">
      <i class="fas fa-arrow-left"></i> Cancelar
    </a>
    <button type="submit" class="btn btn-actualizar">
      <i class="fas fa-save"></i> Guardar Cambios
    </button>
  </div>
</form>

{% endblock section %}